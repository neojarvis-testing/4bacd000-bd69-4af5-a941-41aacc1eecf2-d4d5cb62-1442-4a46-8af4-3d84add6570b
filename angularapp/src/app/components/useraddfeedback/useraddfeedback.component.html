<app-usernav></app-usernav>

<div style="background-image: url('/assets/images/background.webp'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            width: 100%; 
            height: 100%; 
            position: fixed; 
            top: 0; 
            left: 0; 
            z-index: -1; 
            filter: blur(10px);">
</div>

<div class="container" *ngIf="!popupMessage">
  <div class="feedback-form">
    <form [formGroup]="feedbackForm" (ngSubmit)="submitFeedback()">
      <h2>Add Feedback</h2>
      
      <div class="form-group">
        <label for="feedbackText">Feedback *</label>
        <textarea
          id="feedbackText"
          formControlName="feedbackText"
          placeholder="Write your feedback here..."
        ></textarea>
      </div>

      <div *ngIf="feedbackForm.get('feedbackText')?.invalid && feedbackForm.get('feedbackText')?.touched" class="error-messages">
        <p *ngIf="feedbackForm.get('feedbackText')?.errors?.required">Feedback is required.</p>
        <p *ngIf="feedbackForm.get('feedbackText')?.errors?.minlength">Feedback must be at least 5 characters long.</p>
      </div>

      <div class="form-group">
        <label for="rating">Rating *</label>
        <select id="rating" formControlName="rating">
          <option value="" disabled>Select Rating</option>
          <option *ngFor="let num of [1, 2, 3, 4, 5]" [value]="num">{{num}}</option>
        </select>
      </div>
      
      <div *ngIf="feedbackForm.get('rating')?.invalid && feedbackForm.get('rating')?.touched" class="error-messages">
        <p *ngIf="feedbackForm.get('rating')?.errors?.required">Rating is required.</p>
      </div>
      
      <button type="submit" [disabled]="feedbackForm.invalid">Submit</button>
    </form>
  </div>
</div>


<div *ngIf="popupMessage" class="popup">
  <p>{{popupMessage}}</p>
  <button (click)="closePopup()">OK</button>
</div>
